var _a,pTransFunctionMap=pTransFunctionMap||{},keyString="key",valueString="value",_undefined="undefined",lineBreak=(_a=VideoSharedString===null||VideoSharedString===void 0?void 0:VideoSharedString.lineBreak)!==null&&_a!==void 0?_a:"\n",Multimedia;(function(n){var t;(function(t){var i;(function(t){function i(t,i){for(var r,s,c,l,a,u,f,e,h=[],o=0;o<t.length;o++)r=t[o],s=null,(r===null||r===void 0?void 0:r.thumbnailId)&&typeof(ThUrlGenerator===null||ThUrlGenerator===void 0?void 0:ThUrlGenerator.NewThumbnailUrl)=="function"&&typeof((u=n.VideoDetail)===null||u===void 0?void 0:u.ImageWithTestSupport)!=_undefined&&(c=ThUrlGenerator.NewThumbnailUrl(r.thumbnailId,i,null,null),l={src:c,role:"presentation"},s=n.VideoDetail.ImageWithTestSupport(l)),a={summary:r.summary,timeStamp:(e=(f=n.VideoDetail)===null||f===void 0?void 0:f.TimeFormatUtils)===null||e===void 0?void 0:e.ts2MSS(r.timeStamp),thumbnail:s},h.push(a);return h}function r(n,t){return{content:n,type:t?"receive":"send"}}t.v2sb=function(n){var f,c,l,a,v,y,p;if(!n)return null;var i=n.dataInfo,w=n.videoChatDataList,o=n.dataTransformConfig,d=typeof n.maxCount=="number"?n.maxCount:Number.MAX_SAFE_INTEGER;if(!(o===null||o===void 0?void 0:o.cdtcm))return null;var b={},s=0,k=o.cdtcm;for(f in k){if(s>=d)break;if(f){var r=k[f],g=(r===null||r===void 0?void 0:r.t)?r.t:f,h=r===null||r===void 0?void 0:r.mfn,u=h&&pTransFunctionMap[h]?pTransFunctionMap[h]:null,e=void 0;switch(g){case"Chapter":if(!(i===null||i===void 0?void 0:i.videoChapterData))break;c={isAdult:i.isAdult,videoChapterData:i.videoChapterData};l=u?u(c):t.v2c(c);l&&(e={videoChapterData:l});break;case"Lyrics":if(!(i===null||i===void 0?void 0:i.mediaRichMetadata))break;a={mediaRichMetadata:i.mediaRichMetadata};v=u?u(a):t.m2l(a);v&&(e=v);break;case"VideoChat":if(!w)break;y={videoChatDataList:w};p=u?u(y):t.vc2cg(y);p&&(e=p)}e&&(b[f]=e,s++)}}return s>0?b:null};t.v2c=function(n){var u,o,e;if(!n)return null;var s=n.isAdult,f=n.videoChapterData,r=[],t=f===null||f===void 0?void 0:f.outlines;if(t)for(u in t)if(t[u]){o=t[u][keyString];switch(o){case"Chaptering":case"Default":case"Slides":r=r.concat(t[u][valueString])}}return e=r.length>0?i(r,s):null,e?e:null};t.m2l=function(t){if(!t)return null;var r=t.mediaRichMetadata,i=r===null||r===void 0?void 0:r.musicMetadata;return(i===null||i===void 0?void 0:i.lyricText)?{lyricText:typeof n.VideoDetail.Utils.lylb=="function"?n.VideoDetail.Utils.lylb(i.lyricText):i.lyricText,songWriters:i.songWriters}:null};t.vc2cg=function(n){var e,o,i,s,h,u,f,t,c,l;if(!n||(i=n.videoChatDataList,!((i===null||i===void 0?void 0:i.length)>0)))return null;for(s=[],h=[],u=0;u<i.length;u++)if(f=i[u],t=f===null||f===void 0?void 0:f.outlines,(t===null||t===void 0?void 0:t.length)>0){c=function(n){var i=(e=t[n])===null||e===void 0?void 0:e[valueString],u;if(!((i===null||i===void 0?void 0:i.length)>0))return"continue";u=!0;((o=t[n])===null||o===void 0?void 0:o[keyString])=="Input"&&(u=!1);i.map(function(n){if(n===null||n===void 0?void 0:n.position)switch(n.position.toString()){case"Top":var t=r(n,u);h.push(t);break;case"Bottom":if(!n.displayText)return;s.push({query:n.displayText,answer:n})}})};for(l in t)c(l)}return{messageList:h,suggestQuestions:s}};pTransFunctionMap.v2sb=t.v2sb;pTransFunctionMap.v2c=t.v2c;pTransFunctionMap.vc2cg=t.vc2cg;pTransFunctionMap.m2l=t.m2l})(i=t.Transformer||(t.Transformer={}))})(t=n.Video||(n.Video={}))})(Multimedia||(Multimedia={}))