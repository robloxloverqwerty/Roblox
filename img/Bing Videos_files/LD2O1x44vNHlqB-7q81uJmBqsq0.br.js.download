var bepns=bepns||function(n,t){function ui(){var n=this;sj_be(_w,"message",ci,!1);fi();sj_evt.bind("OpenGoBigFlyout",a,1);sj_be(e,"click",a,!1);sj_evt.bind("AutoOpenFlyout",function(){b=!0;y||!y&&yi()>=1200?c(r,"b_hide")?et(n.evt,!1):p=ti:p=ii;p&&typeof LightLogger!="undefined"&&LightLogger&&LightLogger.logInstrumentationV2(null,LightLogger.InstrumentationEventType.Init,ni,!0,{SuppressionReason:p})},!0);sj_evt.bind("AutoOpenFlyoutHide",function(){i&&o(null,!0,!1)},!0);sj_evt.bind(g,hi);sj_evt.bind("onP1",si,1);sj_evt.bind("id:refreshed",ei,1);window.addEventListener("click",function(){s(f,"b_hide")});vi()&&a(null)}var ht="redDotControl",ct="rh_meter_leaf_homepage",lt="rh_meter_leaf",at="givemuid_heart_homepage",vt="GiveMuid",yt="GiveSerp",pt="hub_apps_698b01b4-557a-4a3b-9af7-a7e8138e8372",wt="SUCCESS",v="_RwBf",bt="aad",kt="lka",dt="lkt",gt="ard",ni="AutoOpenFlyoutSuppression",ti="BepFlyoutMissingOrNotHidden",ii="InvalidPageWidth",ri=["bing.com","bing.com:443","bing-exp.com","bing-int.com","localhost","binginternal.com"],w=700,d=320,g="onPopTR",nt="bepfo",b=!1,f,u,h,r,i,e=n("id_rh"),y=typeof _H!="undefined",p="",fi=function(){var i=n("id_rwl");i&&(r=n("bepfo"),r||(i=n("id_rwl"),i&&(r=t("div"),r.id="bepfo",r.className="b_hide",i.parentNode&&i.parentNode.insertBefore(r,i.nextSibling))),f||(f=t("div"),f.id="rewardsPanelContainer",f.className="b_hide",i.parentNode&&i.parentNode.insertBefore(f,r.nextSibling),h=t("div"),h.id="rewardsLoadingAnimation",h.setAttribute("size","extraLarge"),h.setAttribute("class","extraLarge"),f.appendChild(h)))},ei=function(){oi(_ge("idd_rwds"),_ge("idd_rwdstrial"))},oi=function(n,t){n&&t&&(t.href=n.href,n.h?t.h=n.h:n.getAttribute&&n.getAttribute("h")&&t.setAttribute("h",n.getAttribute("h")))},si=function(){var n=0,t=setInterval(function(){e&&e.offsetWidth>0&&e.offsetHeight>0?(clearInterval(t),sj_evt.fire("bepready",st)):n==80&&clearInterval(t);n++},400)},tt=function(){var p=_w.location.href,n=_w.location.search.substr(1),e=it(n),t,s,i,h,r,c,u,l,f,a;try{s=/(?:^|&)hvaName=([^&]*)(?:&|$)/i;t=s.exec(n)}catch(d){t=undefined}try{h=/(?:^|&)partnerId=([^&]*)(?:&|$)/i;i=h.exec(n)}catch(g){i=undefined}try{c=/(?:^|&)features=([^&]*)(?:&|$)/i;r=c.exec(n)}catch(nt){r=undefined}try{l=/(?:^|&)rwgbscenario=([^&]*)(?:&|$)/i;u=l.exec(n)}catch(tt){u=undefined}try{a=/(?:^|&)thirdPartyPartnerId=([^&]*)(?:&|$)/i;f=a.exec(n)}catch(rt){f=undefined}var o=new Date,v=o.getDate(),y=o.getMonth()+1,w="".concat(y<10?"0":"").concat(y,"/").concat(v<10?"0":"").concat(v,"/").concat(o.getFullYear()),b=i&&i[1]?i[1]:"BingRewards",k="/rewards/panelflyout"+(u&&u[1]?"/l2?scenario="+u[1]:"?")+"&partnerId="+b+"&date="+w+(r&&r[1]?"&features="+r[1]:"")+(t&&t[1]?"&hvaName="+t[1]:"")+(e&&e[1]?"&isDarkMode="+e[1]:"")+(f&&f[1]?"&thirdPartyPartnerId="+f[1]:"")+"&ru="+encodeURIComponent(p);return{src:k,darkMode:e}},it=function(n){var t,i;try{i=/(^|&)isDarkMode=([^&]*)(?:&|$)/i;t=i.exec(n);document.body.classList.contains("b_dark")&&(t=["isDarkMode","1"])}catch(r){t=undefined}return t},rt=function(){var i=n("id_rwl"),r;f&&(r=tt(),u||(u=t("iframe"),u.title=i===null||i===void 0?void 0:i.getAttribute("data-title"),u.id="panelFlyout",u.frameBorder="no",u.scrolling="no",u.src=r.src,f.appendChild(u),l(f,"b_hide"),u===null||u===void 0?void 0:u.addEventListener("load",function(){s(h,"b_hide");r.darkMode&&s(f,"darkMode")},!1)))},ut=function(n){u&&u.contentWindow.postMessage({action:"visibility",isVisible:n},"*")},hi=function(n){n[1]!==nt&&o()},ci=function(n){var s=u&&u.contentWindow&&n.source==u.contentWindow&&n.data,h=i&&i.contentWindow&&n.source==i.contentWindow&&n.data,l,f,e,t,v,c;if((s||h)&&li(n)){if(s)switch(n.data.action){case"closeFlyout":l=_ge("rewardsPanelContainer");l&&o(null,!1,!0)}if(h)switch(n.data.action){case"resize":f=n.data.bodyHeight&&parseFloat(n.data.bodyHeight);e=n.data.bodyWidth&&parseFloat(n.data.bodyWidth);f&&!isNaN(f)?(i.height=Math.min(f,w),r.style.height=i.height+"px"):(i.height=Math.min(i.contentWindow.document.body.scrollHeight,w),r.style.height=i.height+"px");e&&!isNaN(e)?(t=Math.min(e,d)+"px",i.style.width=t,r.style.width=t):(t=d+"px",i.style.width=t,r.style.width=t);break;case"refresh":i&&(v=tt(),i.src=v.src);break;case"close":i&&o(null,!0,!1);break;case"OpenGoBig":i&&o(null,!0,!1);a(null)}if(h||s)switch(n.data.action){case"updatePoints":RewardsCreditRefresh&&(c=RewardsCreditRefresh.GetRewardsHeaderBalance(),c!=n.data.newBal&&(RewardsCreditRefresh.SetRewardsHeaderBalance(n.data.newBal),RewardsCreditRefresh.RewardsHeaderAnim(c,n.data.newBal,n.data.goal,n.data.incr)));break;case"redDotControl":sj_evt.fire(ht,!0)}}},ft=function(){i=t("iframe");i.id="bepfm";i.frameBorder="no";i.scrolling="no";i.height=0;i.setAttribute("data-priority","2");r.appendChild(i);r.style.visibility="hidden";r.style.height="100%";sj_be(i,"load",function(){r.style.visibility="visible";i.height=Math.min(i.contentWindow.document.body.scrollHeight,w);r.style.height=i.height+"px";i&&i.contentWindow&&sj_be(i.contentWindow.document,"keyup",k,!0);s(r,"popup")},!1);var n=ai();i.src=n.src;n.isDarkMode&&s(r,"darkMode");window.addEventListener("click",function(){sj_evt.fire("AutoOpenFlyoutHide")})},li=function(n){var t=n.origin;return ri.some(function(n){return t.indexOf(n)==t.length-n.length})?!0:(Log.Log("rwflyout","OriginValidation","Failure",!0,t),!1)},ai=function(){var t=_w.location.search.substr(1),h=/(^|&)rewardstesthooks=1(&|$)/i.exec(t),i=/(?:^|&)rewardsbag=([^&]*)(?:&|$)/i.exec(t),r=undefined,c,l,s;try{c=/(^|&)uncrunched=1(&|$)/i;r=c.exec(t)}catch(w){r=undefined}var u=it(t),f=u&&u[1]&&u[1]=="1",n=undefined;try{l=/(?:^|&)partnerId=([^&]*)(?:&|$)/i;n=l.exec(t)}catch(b){n=undefined}var e=new Date,a=e.getDate(),v=e.getMonth()+1,y=(v<10?"0":"")+v+"/"+(a<10?"0":"")+a+"/"+e.getFullYear(),p="/rewardsapp/flyout?channel=2",o;return!n&&_ge?(s="",_ge(ct)||_ge(lt)||_ge(at)?s=vt:(_ge("gwb_teal_heart")||_ge("gwb_header_wrapper"))&&(s=yt),o=p+"&partnerId=AutoOpenFlyout&date="+y+(h&&i?"&atlahostname=localhost&bag="+i[1]:"")+(r?"&uncrunched=1":"")+(f?"&isDarkMode=1":"")):o=p+(n&&n[1]?"&partnerId="+n[1]:"")+"&date="+y+(h&&i?"&atlahostname=localhost&bag="+i[1]:"")+(r?"&uncrunched=1":"")+(f?"&isDarkMode=1":""),{src:o,isDarkMode:f}},vi=function(){var r=_w.location.href,i=_w.location.search.substr(1),n,t;try{t=/(?:^|&)rwgbopen=([^&]*)(?:&|$)/i;n=t.exec(i)}catch(u){n=undefined}return n&&n[1]==="1"},o=function(n,t,u){t===void 0&&(t=!0);u===void 0&&(u=!0);t&&(s(r,"b_hide"),l(e,"openfo"),i&&i.contentWindow&&sj_ue(i.contentWindow.document,"keyup",k,!0));u&&(s(f,"b_hide"),l(h,"b_hide"),ut(!1));y&&ot();sj_ue(_d,"click",o,!0);sj_ue(_d,"keyup",k,!0);n&&sj_sp(n);n&&sj_pd(n)},k=function(n){var u=n.which||n.keyCode,r=sj_et(n),t;if(u==27){o(n);e.focus();return}if(u==9&&r&&i){if(t=r.nodeName,t=="BODY"||t=="HTML"||t=="#document")return;i.contentWindow.document.body.contains(r)||o(n)}},et=function(n,t){(sj_evt.fire("focusChange","bep"),t||c(f,"b_hide"))&&(!t&&r&&(l(r,"popup"),r.firstChild?b&&(r.removeChild(i),ft(),b=!1):ft(),l(r,"b_hide"),e.setAttribute("aria-expanded","true")),t&&f&&(u||rt(),ut(!0),l(f,"b_hide"),s(h,"b_hide")),s(e,"openfo"),sj_sp(n),sj_evt.fire(g,nt))},yi=function(){return Math.max(_d.body.scrollWidth,_d.documentElement.scrollWidth,_d.body.offsetWidth,_d.documentElement.offsetWidth,_d.documentElement.clientWidth)},a=function(n){var i=sj_cook.get(v,bt),r=sj_cook.get(v,kt),u=sj_cook.get(v,dt),t;i=="1"&&u=="1"&&r=="0"&&(t=(new Date).toISOString(),sj_cook.set(v,gt,t,!0));pi(wi,n)},pi=function(n){for(var r,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];if(r=typeof window!="undefined"&&typeof chrome!="undefined"&&typeof window.chrome.edgeMarketingPagePrivate!="undefined"&&typeof window.chrome.edgeMarketingPagePrivate.showFeatures=="function",!r){typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("RewardsHub","RewardsHubNotAvailableFallback","RewardsHubNotAvailableFallback");n.apply(void 0,i);return}window.chrome.edgeMarketingPagePrivate.showFeatures(pt,function(t){t!==wt?(typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("RewardsHub","RewardsHubFailureFallback","RewardsHubFailureFallback"),n.apply(void 0,i)):typeof Log!="undefined"&&Log&&Log.Log&&Log.Log("RewardsHub","OpenRewardsHub","OpenRewardsHub")})},wi=function(n){if(c(f,"b_hide")&&c(r,"b_hide")){u||rt();et(n,!0);return}if(!c(f,"b_hide")){o(n,!1,!0);return}c(r,"b_hide")||o(n,!0,!1)},s=function(n,t){n&&!c(n,t)&&(n.className+=" "+t)},ot=function(){l(e,"rigleamon")},l=function(n,t){if(c(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}},c=function(n,t){if(n&&n.className){var i=" "+n.className+" ";return i.indexOf(" "+t+" ")!==-1}return!1},st=function(n){y&&(n&&n>0?bi():ot())},bi=function(){s(e,"rigleamon")},ki=function(){e&&sj_ue(e,"click",a,!1)};return ui(),{sg:st,ubc:ki}}(_ge,sj_ce)