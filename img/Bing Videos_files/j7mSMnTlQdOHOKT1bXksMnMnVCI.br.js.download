var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},VideoEvents;(function(){function lt(t){(b(),t&&!(t.length<2)&&t[1]&&v&&n)&&(w=t[1].videoType,s=t[1].videoExtraInfo,i=t[1].bindEventSupportedList?t[1].bindEventSupportedList:i,tt=t[1].skipPerVideoCI,vt())}function at(t){var i;t&&!(t.length<2)&&t[1]&&v&&n&&(nt=(i=t[1].ci)===null||i===void 0?void 0:i.noci)}function vt(){(i===null||i===void 0?void 0:i.indexOf("video"))!=-1&&(sj_evt.bind(n.EmbedPlayer_ComponentUpdate,it),sj_evt.bind(n.VideoCanvas_VideoPlaying,c),sj_evt.bind(n.VideoCanvas_VideoStopped,u),sj_evt.bind(n.VideoCanvas_VideoEnded,u),sj_evt.bind(n.VideoCanvas_VideoPlayerReady,rt));t&&(i===null||i===void 0?void 0:i.indexOf("preview"))!=-1&&(sj_evt.bind(t.PlayerDownloadEndEvt,ut),sj_evt.bind(t.PlayerStartEvt,c),sj_evt.bind(t.PlayerEndEvt,u),sj_evt.bind(t.PlayerErrEvt,u),sj_evt.bind(t.PlayerPauseEvt,u),sj_evt.bind(t.StopPlayEvt,u));sj_be(_w,d,b)}function it(){if(typeof(r===null||r===void 0?void 0:r.destroy)==a){if(h){var n=r.getTimeLeft();r.pause();n>0&&!o&&n<ct&&k(!0)}r.destroy()}nt&&!o&&e&&k(!1);r=null;o=!1;h=!1}function c(){if(!o){if(r)r.start();else{var n=wt();pt();r=new v(yt,n)}l("startTimer")}}function u(){r===null||r===void 0?void 0:r.pause();l("pauseTimer")}function b(){(i===null||i===void 0?void 0:i.indexOf("video"))!=-1&&(sj_evt.unbind(n.EmbedPlayer_ComponentUpdate,it),sj_evt.unbind(n.VideoCanvas_VideoPlaying,c),sj_evt.unbind(n.VideoCanvas_VideoStopped,u),sj_evt.unbind(n.VideoCanvas_VideoEnded,u),sj_evt.unbind(n.VideoCanvas_VideoPlayerReady,rt));t&&(i===null||i===void 0?void 0:i.indexOf("preview"))!=-1&&(sj_evt.unbind(t.PlayerDownloadEndEvt,ut),sj_evt.unbind(t.PlayerStartEvt,c),sj_evt.unbind(t.PlayerEndEvt,u),sj_evt.unbind(t.PlayerErrEvt,u),sj_evt.unbind(t.PlayerPauseEvt,u),sj_evt.unbind(t.StopPlayEvt,u));sj_ue(_w,d,b)}function rt(n){if(f=-1,n&&!(n.length<2)&&n[1]){var t=n[1];t.videoDuration>0&&(f=t.videoDuration*g);switch(w){case"video":h=f<=y;break;case"preview":h=f<=p}}}function ut(n){if(f=-1,n&&!(n.length<5)&&n[4]){var t=n[4];t>0&&(f=t*g)}}function l(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];"object"===ft&&"object"===a}function yt(){if(tt){l("Skip per video IsCI");return}k(!0);l("IsCI")}function pt(){var n={TS:null,T:null,AppNS:ot},t={recoFeedbackType:null,videoExtraInfo:__assign({},s)};s&&(n=__assign(__assign({},n),s));e={j:n,r:t}}function k(t){var i=e===null||e===void 0?void 0:e.j,r=e===null||e===void 0?void 0:e.r;i&&r&&(i.T=t?"IsCI":"IsNoCI",i.TS=(new Date).getTime(),r.recoFeedbackType=t?"IsCI":"IsNoCI",pInstr.icd(i),typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)==a&&(sj_evt.fire(n.VideoEvent_SendRecoFeedback,r),sj_evt.fire(n.VideoCanvas_VideoCI,i)),o=t)}function wt(){switch(w){case"video":return f>st?ht:f>0?Math.min(f,y):y;case"preview":return f>0?Math.min(f,p):p;default:return Number.MAX_SAFE_INTEGER}}var ft="object",a="function",et="Video.IsCI",t=typeof VRHConsts!="undefined"?VRHConsts:null,n=typeof SharedEventString!="undefined"?SharedEventString:null,v=typeof MMTimer!="undefined"&&typeof(MMTimer===null||MMTimer===void 0?void 0:MMTimer.Timer)!="undefined"?MMTimer.Timer:typeof MMTimer!="undefined"&&typeof(MMTimer===null||MMTimer===void 0?void 0:MMTimer.Timer_FixPause)!="undefined"?MMTimer.Timer_FixPause:null,d="unload",ot="video",st=3e4,ht=2e4,y=8e3,p=8e3,g=1e3,ct=1e3,f,s,w,r,o=!1,h=!1,e,nt=!1,i=["preview","video"],tt=!1;sj_evt.bind(n===null||n===void 0?void 0:n.VideoCanvas_InitIsCIModule,lt,!0);sj_evt.bind(n===null||n===void 0?void 0:n.VideoCanvas_UpdateVideoEventsConfig,at,!0)})(VideoEvents||(VideoEvents={}))